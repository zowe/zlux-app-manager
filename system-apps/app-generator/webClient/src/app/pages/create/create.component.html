
<!-- 
  This program and the accompanying materials are
  made available under the terms of the Eclipse Public License v2.0 which accompanies
  this distribution, and is available at https://www.eclipse.org/legal/epl-v20.html
  
  SPDX-License-Identifier: EPL-2.0
  
  Copyright Contributors to the Zowe Project.
-->
<div class="top-title">
  Create Application
</div>

<div class="create-container">
  <div class="top-row">
    <div class="form-container">
      <ibm-label
        class="item-label"
        [invalid]="identifier.invalid"
        invalidText="Invalid character: only A-Z, 1-9, ., -, and _ allowed.">
        Identifier
        <input
          ibmText
          placeholder="Identifier e.g. com.your.application"
          pattern="[A-Za-z1-9.\-_]*"
          [(ngModel)]="pluginConfig.identifier"
          #identifier="ngModel">
      </ibm-label>

      <ibm-label
        class="item-label">
        Name
        <input
          ibmText
          placeholder="Application Name"
          [(ngModel)]="pluginConfig.webContent.launchDefinition.pluginShortNameDefault">
      </ibm-label>

      <ibm-label
        class="item-label">
        Description
        <input
          ibmText
          placeholder="Application Description"
          [(ngModel)]="pluginConfig.webContent.descriptionDefault">
      </ibm-label>

      <ibm-label
        class="item-label">
        Framework
      </ibm-label>
      <ibm-tile-group
        class="tile-group"
        (selected)="onFrameworkSelect($event.value)"
        [multiple]="false">
        <ibm-selection-tile
          *ngFor="let framework of frameworks"
          [value]="framework.value"
          [selected]="framework.selected">
          <div class="tile-header">{{framework.value}}</div>
          <div class="tile-body">{{framework.desc}}</div>
        </ibm-selection-tile>
      </ibm-tile-group>

      <div
        *ngIf="isIframe"
        class="tile-group"
        style="display:block; margin-top:0.5rem;">
        <div class="tile-header">
          iFrame specific
        </div>
        <div class="tile-body">
          Applies only to iFrame applications
        </div>
      </div>
      
      <ibm-label
        *ngIf="isIframe"
        class="item-label">
        Starting Page
        <input
          ibmText
          placeholder="html/index.html"
          [(ngModel)]="pluginConfig.webContent.startingPage">
      </ibm-label>

      <div
        *ngIf="templates"
        style="margin-top:0.5rem;">
        <div style="display:flex;flex-direction:row;">
          <ibm-dropdown
            label="Template"
            placeholder="Select Template">
            <ibm-dropdown-list
              [items]="templates"
              (select)="onTemplateSelect($event)">
            </ibm-dropdown-list>
          </ibm-dropdown>
	  <div
            class="tile-group"
            style="display:block;margin-top:1.5rem;margin-left:2rem;">
            <div class="tile-header">
              {{pluginConfig.template}}
            </div>
            <div class="tile-body">
              {{selectedTemplateDescription}}
            </div>
          </div>
	</div>
      </div>

      <ibm-label
        class="item-label">
        Version
        <input
          ibmText
          placeholder="Plugin Version"
          [(ngModel)]="pluginConfig.pluginVersion">
      </ibm-label>

      <div style="display:flex; flex-direction:row;">
        <div style="margin-right:0.25rem;">
          <div class="custom-label">Default Window Width (px)</div>
          <ibm-number
            [(ngModel)]="pluginConfig.webContent.defaultWindowStyle.width">
          </ibm-number>
        </div>

        <div style="margin-left:0.25rem;">
          <div class="custom-label">Default Window Height (px)</div>
          <ibm-number
            [(ngModel)]="pluginConfig.webContent.defaultWindowStyle.height">
          </ibm-number>
        </div>
      </div>

      <ibm-label
        class="item-label">
        Author
        <input
          ibmText
          placeholder="Author"
          [(ngModel)]="pluginConfig.author">
      </ibm-label>

      <ibm-label
        class="item-label">
        Author Homepage
        <input
          ibmText
          placeholder="Author Homepage"
          [(ngModel)]="pluginConfig.homepage">
      </ibm-label>
    </div>
    
    <div class="module-container">
      <ibm-label>Preview
        <textarea
          ibmTextArea
          [disabled]="true"
          theme="light"
          [rows]="25"
          [cols]="45"
          aria-label="preview">
          {{pluginText}}
        </textarea>
      </ibm-label>
    </div>
  </div>

  <div class="control-container">
    <button
      ibmButton
      [disabled]="identifier.invalid
        || !pluginConfig.identifier
        || !pluginConfig.webContent.descriptionDefault
        || !pluginConfig.webContent.launchDefinition.pluginShortNameDefault
        || !pluginConfig.webContent.framework
        || !pluginConfig.template"
      (click)="generateApp()">
      Create
    </button>
  </div>
</div>

<!-- 
  This program and the accompanying materials are
  made available under the terms of the Eclipse Public License v2.0 which accompanies
  this distribution, and is available at https://www.eclipse.org/legal/epl-v20.html
  
  SPDX-License-Identifier: EPL-2.0
  
  Copyright Contributors to the Zowe Project.
-->
